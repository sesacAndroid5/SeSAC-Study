로그인 인증에서 Access Token과 Refresh Token을 함께 사용하는 이유
=============
## JWT 토큰 
JWT(Json Web Token)는 사용자의 인증이나 권한등을 json 혓그로 저장한 토큰이다.
JWT는 자체적으로 서명이 되어 있어 위변조를 방지할 수 있다. 
서버는 JWT를 복호화해서 사용자의 정보를 검증하고 세션을 서버에 저장할 필요가 없다. (StateLess 인증 방식)

| 구성      | 설명 |
|-----------|------|
| Header    | 토큰 타입(JWT)과 서명 알고리즘 정보 |
| Payload   | 사용자 정보 및 클레임 (예: userId, role) |
| Signature | 위변조 방지를 위한 서명 |

하지만 JWT가 탈취당할경우 서버는 탈취당한 사실을 구분할 수 없다. 
이러한 이유로 토큰에 유효기간을 주고 사용한다.
유효기간을 짧게 두면 사용자는 로그인을 자주해야하고 유효기간을 길게 하면 탈취당할 수 있기 떄문이다. 
따라서 유효기간이 다른 2개의 토큰을 사용하는것이다.
## Access Token이란?

- API 요청 시 함께 전송되는 **단기 인증 토큰**
- JWT로 구성되어 있음
- 클라이언트가 저장하며, 보통 30분에서 1시간동안 유효하다
- 서버는 이 토큰을 기반으로 사용자 인증

---

## Refresh Token이란?

- Access Token이 만료된 후 **새로운 토큰을 발급받기 위한 용도**
- 일반적으로 **서버가 저장**하거나 안전한 클라이언트 스토리지에 보관
- 유효 기간이 **길다** (수개월에서 1년)
- 노출 시 Access Token을 무한 발급 가능 → **강한 보안 관리 필요**

---

##  Access Token vs Refresh Token

| 항목            | Access Token         | Refresh Token         |
|----------------|----------------------|------------------------|
| 사용 목적       | API 인증             | Access Token 재발급    |
| 유효 기간       | 짧음   | 김        |
| 저장 위치       | 클라이언트           | 서버 or 안전한 저장소 |
| 보안 위험       | 탈취 시 API 접근     | 탈취 시 무제한 발급 위험 |
| 전송 빈도       | 모든 API 요청에 사용 | 재발급 요청 시만 사용  |

---

##  왜 둘 다 사용해야 할까?

### 문제 상황

- **Access Token만 사용 시**:  
  → 탈취 위험이 크기 때문에 짧게 설정  
  → 사용자 불편: 자주 로그아웃, 로그인 반복

- **Refresh Token을 함께 사용하면**:  
  - Access Token은 짧게 → **보안성 강화**  
  - Refresh Token으로 재발급 → **UX 유지**  
  - 서버에서 Refresh Token 관리 → **탈취 대응 가능**

---

