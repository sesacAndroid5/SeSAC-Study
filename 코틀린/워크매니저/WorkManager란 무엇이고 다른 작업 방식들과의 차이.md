# WorkManager란 무엇이고 다른 작업 방식과의 차이점 🚀

**WorkManager**는 지연 가능한(deferrable) 비동기 작업을 예약하고, 앱이 종료되거나 기기가 재부팅되더라도 안정적으로 실행되도록 도와주는 Android Jetpack 라이브러리입니다.


---


## 🔹 1. WorkManager의 핵심: 보장된 실행

WorkManager는 앱의 프로세스에서 직접 동작하지 않고, Android OS의 시스템 서비스를 통해 작업을 스케줄링합니다.  
이를 통해 앱이 종료되어도 작업이 손실되지 않고, 재부팅 이후에도 이어서 실행될 수 있습니다.

### 📌 작업 처리 흐름
1. **작업 요청:** 앱이 WorkManager에 작업을 요청합니다.  
2. **시스템 위임:** WorkManager는 JobScheduler 등 시스템 서비스에 등록합니다.  
3. **중앙 관리:** 시스템은 여러 앱의 작업을 통합 관리합니다.  
4. **최적 실행:** 시스템이 배터리/네트워크 등 조건에 맞춰 작업을 최적의 타이밍에 실행합니다.

> "A, B 앱 모두 네트워크 작업이 필요하네? 그럼 네트워크를 켠 김에 둘 다 한꺼번에 처리해서 배터리를 아껴야겠다!"
> 
> ⚠️이러한 최적화 과정 때문에 내 앱의 작업이 다른 앱의 작업과 함께 처리되면서 순서가 뒤로 밀릴 수 있습니다.

#### 따라서 WorkManager는 **정확한 시간 보장 도구**가 아니라, **실행 보장과 시스템 자원 최적화**를 위한 도구입니다.


---



## 🔹 2. WorkManager의 주요 이점

- ✅ **일회성 및 주기적 작업 지원**  
  - 일회성: "지금 찍은 사진을 나중에 서버에 업로드해줘."
  - 주기적: "12시간마다 새로운 데이터를 동기화해줘."

- ✅ **제약 조건 설정 가능**  
  - "Wi-Fi에 연결됐을 때만 실행해줘"
  - "기기가 충전 중일 때만 실행해줘."
  - "저장 공간이 충분할 때만 실행해줘."

- ✅ **복잡한 작업 체이닝 지원**  
  - 순차 실행: A 작업이 끝나면 B를, B가 끝나면 C를 실행할 수 있습니다. (then)
  - 동시 실행: A 작업이 끝나면 B와 C를 동시에 실행하고, 둘 다 끝나면 D를 실행하는 복잡한 그래프 구성도 가능합니다.

- ✅ **작업 간 데이터 전달**  
  - 앞 작업의 결과(Output)를 뒷 작업의 입력(Input)으로 넘겨주어 연속적인 데이터 처리가 가능합니다.

- ✅ **강력한 하위 호환성**  
  - API 수준 14(아이스크림 샌드위치)까지 지원합니다. 개발자는 버전 걱정 없이 사용하면, WorkManager가 내부적으로 기기 버전에 맞는 최적의 방식으로 동작합니다.

- ✅ **Google Play 서비스 불필요**  
  - 구글 플레이 서비스가 없는 기기에서도 안정적으로 동작합니다. (예:화웨이 등에서도 안정적으로 동작)

- ✅ **상태 관찰 가능 (UI 연동)**  
  - LiveData 또는 Flow를 통해 작업의 상태(대기중, 실행중, 성공 등)를 UI에 쉽게 반영할 수 있습니다.

---

## 🔹 3. WorkManager가 적합한 작업 예시

> "사용자가 앱을 떠나도 결국엔 완료되어야 하는 작업"에 최적화

- 서버 로그 또는 분석 데이터 전송  
- 로컬 데이터 주기적 동기화  
- 이미지 필터 적용 및 저장  
- 데이터베이스 정리/압축  
- 앱 내 캐시 정리 등

---

## 🔹 4. 다른 백그라운드 작업 방식과의 비교

| 구분               | WorkManager             | Foreground Service       | Background Service       | AlarmManager             |
|--------------------|--------------------------|---------------------------|---------------------------|---------------------------|
| **핵심 목적**       | 지연 가능 & 보장된 작업     | 사용자에게 보여지는 장기 실행 | 즉시 시작 & 짧은 작업       | 정확한 시간 트리거          |
| **실행 시점**       | 시스템 최적화 (지연될 수 있음) | 즉시 실행                   | 즉시 실행                   | 정확한 시점 (단, Doze 영향)  |
| **보장성**         | 높음 (재부팅 후에도 유지)     | 낮음 (앱 종료 시 함께 종료)    | 낮음 (시스템이 중단 가능)     | 높음 (알람은 시스템이 유지)   |
| **작업 지속 시간**   | 작업 완료까지               | 명시적으로 종료 전까지       | 수 분 내 제한               | 알람 시점에 실행            |
| **알림 필요 여부**   | ❌ 필요 없음                 | ✅ 필수 (상태바에 표시)      | ❌ 필요 없음                 | ❌ 필요 없음                 |

---

## 🔹 5. 언제 어떤 것을 사용해야 할까?

| 상황                                            | 적합한 도구              |
|-------------------------------------------------|---------------------------|
| **지연 가능하지만 반드시 실행되어야 하는 작업**         | ✅ WorkManager             |
| **지금 바로 시작해서 계속 실행되어야 하고, 사용자에게 보여야 함** | ✅ Foreground Service       |
| **즉시 시작하지만 짧게 끝나는 작업 (예: 수초~수분)**   | ⚠️ Background Service *(권장 X)* |
| **정해진 시각에 무조건 트리거가 필요한 경우**           | ✅ AlarmManager            |

---

## 📝 마무리 요약

- **WorkManager**는 대부분의 백그라운드 작업에 있어 **권장되는 기본 도구**입니다.
- **보장된 실행**, **시스템 자원 최적화**, **제약 조건 설정**, **작업 체이닝** 등 다양한 기능을 제공합니다.
- Android 6.0 이상의 Doze 모드 환경에서도 안정적인 백그라운드 작업이 가능합니다.

> 💡 정확한 시각 또는 긴 실행 시간이 필요한 경우는 `AlarmManager` 또는 `ForegroundService`와의 조합을 고려하세요.
